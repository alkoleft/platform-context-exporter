# platform-context-exporter

Консольное приложение для экспорта информации о контексте платформы 1С:Предприятие (BSL) из файла справки `shcntx_ru.hbk` в формат JSON.

## Обзор

Приложение `platform-context-exporter` предназначено для разработчиков, работающих с языком BSL (Business Specific Language) и экосистемой 1С:Предприятие. Оно позволяет извлечь структурированную информацию о глобальных свойствах, глобальных методах и типах платформы, которая содержится в стандартном файле справки `shcntx_ru.hbk`. Эта информация экспортируется в три JSON-файла, которые могут быть использованы для различных целей, таких как:

*   Автодополнение кода в IDE и редакторах.
*   Генерация документации.
*   Анализ структуры платформы.
*   Интеграция с другими инструментами разработки.

Проект использует Spring Boot и Picocli для создания удобного CLI-интерфейса.

## Сборка

Проект собирается с помощью Gradle. Для сборки выполните следующую команду в корневой директории проекта:

```bash
./gradlew build
```

После успешной сборки исполняемый JAR-файл будет находиться в директории `build/libs/`.

## Использование

Приложение запускается из командной строки. Основная команда — `platform`.

```bash
java -jar platform-context-exporter-<версия>.jar platform <путь_к_shcntx_ru_hbk_dir> <путь_к_выходной_директории>
```

**Аргументы:**

*   `platform`: Основная команда для запуска экспорта.
*   `<путь_к_shcntx_ru_hbk_dir>`: Обязательный параметр. Путь к директории, в которой находится файл справки `shcntx_ru.hbk`. Приложение будет искать этот файл внутри указанной директории (включая поддиректории).
*   `<путь_к_выходной_директории>`: Обязательный параметр. Путь к директории, в которую будут сохранены сгенерированные JSON-файлы. Если директория не существует, она будет создана.

**Пример:**

```bash
java -jar platform-context-exporter-1.0-SNAPSHOT.jar platform /path/to/onec/help/ /output/json/
```

## Выходные JSON-файлы

В результате работы приложения в указанной выходной директории будут созданы три JSON-файла:

### 1. `global-properties.json`

Этот файл содержит массив JSON-объектов, описывающих глобальные свойства контекста платформы.

**Структура объекта свойства:**

```json
{
  "name": "ИмяСвойства",         // (String) Имя свойства (на русском языке)
  "name_en": "PropertyName",      // (String) Английский псевдоним свойства
  "description": "Описание...",   // (String) Описание свойства
  "readonly": true,               // (boolean) true, если свойство только для чтения, иначе false
  "type": "ТипСвойства"         // (String, опционально) Тип свойства
}
```

### 2. `global-methods.json`

Этот файл содержит массив JSON-объектов, описывающих глобальные методы контекста платформы. Включаются только методы, доступные на сервере или тонком клиенте.

**Структура объекта метода:**

```json
{
  "name": "ИмяМетода",             // (String) Имя метода (на русском языке)
  "name_en": "MethodName",          // (String) Английский псевдоним метода
  "description": "Описание...",       // (String) Описание метода
  "signature": [                    // (Array) Массив сигнатур метода
    {
      "description": "Описание сигнатуры...", // (String) Описание конкретной сигнатуры
      "params": [                       // (Array) Массив параметров для данной сигнатуры
        {
          "name": "ИмяПараметра",   // (String) Имя параметра
          "description": "Описание...",// (String) Описание параметра
          "type": "ТипПараметра",   // (String, опционально) Тип параметра
          "required": false         // (boolean, опционально) true, если параметр обязательный (присутствует, если false)
        }
        // ... другие параметры
      ]
    }
    // ... другие сигнатуры (если есть)
  ],
  "return": "ТипВозвращаемогоЗначения" // (String, опционально) Тип возвращаемого значения метода
}
```

### 3. `types.json`

Этот файл содержит массив JSON-объектов, описывающих типы данных платформы.

**Структура объекта типа (`PlatformTypeDefinition`):**

```json
{
  "name": "ИмяТипа",              // (String) Имя типа
  "description": null,             // (String) Описание типа (может быть null)
  "methods": [                    // (Array) Массив объектов MethodDefinition (см. ниже)
    // ...
  ],
  "properties": [                 // (Array) Массив объектов PropertyDefinition (см. ниже)
    // ...
  ],
  "constructors": [               // (Array) Массив объектов Signature (описание конструкторов, см. ниже)
    // ...
  ]
}
```

**Структура `MethodDefinition` (для методов типа):**

```json
{
  "description": "Описание метода...", // (String) Описание метода из MethodSignature
  "params": [                       // (Array) Массив ParameterDefinition из MethodSignature
    // ... см. ParameterDefinition ...
  ],
  "name": "ИмяМетодаТипа",         // (String) Имя метода
  "signature": [                    // (Array) Массив объектов Signature (для перегрузок метода)
    // ... см. Signature ...
  ],
  "return": "ТипВозврата"          // (String) Тип возвращаемого значения (поле returnType)
}
```

**Структура `PropertyDefinition` (для свойств типа):**

```json
{
  "name": "ИмяСвойства",         // (String) Имя свойства
  "description": "Описание...",   // (String) Описание свойства
  "readonly": true,               // (boolean) true, если свойство только для чтения
  "type": "ТипСвойства"         // (String) Тип свойства
}
```

**Структура `Signature` (для конструкторов и сигнатур методов):**

```json
{
  "description": "Описание сигнатуры/конструктора...", // (String) Описание из MethodSignature
  "params": [                                   // (Array) Массив ParameterDefinition из MethodSignature
    // ... см. ParameterDefinition ...
  ],
  "name": "ИмяСигнатуры"                         // (String) Имя сигнатуры (например, "Основной" или имя для перегрузки)
}
```

**Структура `ParameterDefinition` (для параметров):**

```json
{
  "required": false,              // (boolean) true, если параметр обязательный
  "name": "ИмяПараметра",         // (String) Имя параметра
  "description": "Описание...",   // (String) Описание параметра
  "type": "ТипПараметра"         // (String) Тип параметра
}
```
При сериализации в `types.json` поля со значением `null` не включаются в итоговый JSON.

## Зависимости

Основные зависимости проекта:

*   Spring Boot
*   Picocli (для CLI)
*   Jackson (для работы с JSON)
*   `com.github._1c_syntax.bsl-context` (для парсинга `shcntx_ru.hbk`)
*   Lombok

## Лицензия

Информация о лицензии отсутствует в исходном коде. Уточните у автора проекта.
